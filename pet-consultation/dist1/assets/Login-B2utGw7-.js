import{u as F,b as S,r as o,l as A,j as e,f as E,t as M}from"./index-BgTIe4Qm.js";import{B as D}from"./Button-CFZU5Yrt.js";import{I as u}from"./InputField-y3Sg7NNn.js";import{A as I}from"./Alert-COEKwUaA.js";const T=()=>{const m=F(),{login:p,adminLogin:f}=S(),[y,g]=o.useState(!1),[n,j]=o.useState({}),[c,d]=o.useState(""),[s,b]=o.useState({mobile:"",password:"",rememberMe:!1,isAdminLogin:!1});o.useEffect(()=>{const r=localStorage.getItem("loginFormData");if(r)try{const a=JSON.parse(r);b(t=>({...t,...a}))}catch(a){A.error("Failed to load login information",{error:a})}},[]),o.useEffect(()=>{const r={mobile:s.mobile,rememberMe:s.rememberMe};localStorage.setItem("loginFormData",JSON.stringify(r))},[s.mobile,s.rememberMe]);const l=(r,a)=>{const t={...n};switch(r){case"mobile":{/^09\d{9}$/.test(a)?delete t.mobile:t.mobile="شماره موبایل باید با 09 شروع شده و 11 رقم باشد";break}case"password":delete t.password;break}j(t)},i=r=>{const{name:a,value:t,type:x,checked:v}=r.target,k=x==="checkbox"?v:t;b(L=>({...L,[a]:k})),x!=="checkbox"&&l(a,t),c&&d("")},h=r=>{const{name:a,value:t}=r.target;l(a,t)},N=r=>{r.preventDefault(),l("mobile",s.mobile),l("password",s.password),!(Object.keys(n).length>0)&&(g(!0),d(""),setTimeout(async()=>{try{const t=await(s.isAdminLogin?f:p)(s.mobile,s.password,s.rememberMe);localStorage.removeItem("loginFormData"),t.isAdmin?m("/admin/dashboard"):m("/pet-selection")}catch(a){const t=M(a.message)||"شماره موبایل یا رمز عبور اشتباه است";d(t)}finally{g(!1)}},1500))},w=()=>s.mobile.trim()!==""&&s.password.trim()!==""&&Object.keys(n).length===0;return e.jsx("div",{className:"min-h-screen gradient-bg flex items-center justify-center p-2 sm:p-4",children:e.jsxs("div",{className:"max-w-md w-full mx-2 sm:mx-4",children:[e.jsxs("div",{className:"text-center mb-4 sm:mb-8",children:[e.jsx("a",{href:"https://fattahianpethospital.com/",target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx("img",{src:E,alt:"لوگو بیمارستان حیوانات خانگی دکتر فتاحیان",className:"w-36 h-36 sm:w-52 sm:h-52 md:w-68 md:h-68 mx-auto mb-2 sm:mb-4 object-contain cursor-pointer hover:opacity-80 transition-opacity"})}),e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-800 mb-2",children:"ورود به حساب کاربری"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"برای دسترسی به خدمات مشاوره وارد شوید"})]}),e.jsxs("div",{className:"card",children:[c&&e.jsx("div",{className:"mb-6",children:e.jsx(I,{type:"error",message:c})}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsx(u,{label:"شماره موبایل",name:"mobile",type:"tel",value:s.mobile,onChange:i,onBlur:h,placeholder:"09xxxxxxxxx",error:n.mobile,required:!0,className:"ltr text-left",maxLength:11}),e.jsx(u,{label:"رمز عبور",name:"password",type:"password",value:s.password,onChange:i,onBlur:h,placeholder:"رمز عبور خود را وارد کنید",error:n.password,required:!0,showPasswordToggle:!0}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"isAdminLogin",name:"isAdminLogin",type:"checkbox",checked:s.isAdminLogin,onChange:i,className:"h-4 w-4 text-cyan-600 focus:ring-cyan-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isAdminLogin",className:"mr-2 block text-sm text-gray-700",children:"ورود به عنوان ادمین"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"rememberMe",name:"rememberMe",type:"checkbox",checked:s.rememberMe,onChange:i,className:"h-4 w-4 text-cyan-600 focus:ring-cyan-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"rememberMe",className:"mr-2 block text-sm text-gray-700",children:"مرا به خاطر بسپار"})]}),e.jsx(D,{type:"submit",loading:y,disabled:!w(),size:"lg",className:"w-full",children:"ورود"})]}),e.jsx("div",{className:"text-center mt-6 pt-6 border-t border-gray-200",children:e.jsxs("p",{className:"text-gray-600",children:["حساب کاربری ندارید؟"," ",e.jsx("button",{onClick:()=>m("/registration"),className:"text-cyan-600 hover:underline font-medium",children:"ثبت نام کنید"})]})})]}),e.jsx("div",{className:"text-center mt-4 sm:mt-8",children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["در صورت بروز مشکل با شماره"," ",e.jsx("span",{className:"font-medium text-gray-700",children:"021-12345678"})," تماس بگیرید"]})})]})})};export{T as default};
